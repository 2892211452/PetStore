<!--
Author: W3layouts
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html>
<head>
<title>signup</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>

<meta name="keywords" content="Internship Sign In & Sign Up Form Responsive Widget,Login form widgets, Sign up Web forms , Login signup Responsive web form,Flat Pricing table,Flat Drop downs,Registration Forms,News letter Forms,Elements" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- Custom Theme files -->
<link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" media="all">
<link href="css/snow.css" rel="stylesheet" type="text/css" media="all" />
<link href="css/style1.css" rel="stylesheet" type="text/css" media="all" />
<!-- //Custom Theme files -->
<!-- web font -->
<link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet">
<link href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">

<!-- //web font -->
</head>
<body>
<div id="app">
<div class="snow-container">
			  <div class="snow foreground"></div>
			  <div class="snow foreground layered"></div>
			  <div class="snow middleground"></div>
			  <div class="snow middleground layered"></div>
			  <div class="snow background"></div>
			  <div class="snow background layered"></div>
			</div>

<div class="top-buttons-agileinfo">
<a href="login">Sign In</a><a href="signup.html" class="active">Sign Up</a>
</div>
<h1>Welcome To PetStore</h1>
<div class="main-agileits">
<!--form-stars-here-->
		<div class="form-w3-agile">
			<h2 class="sub-agileits-w3layouts">Sign Up</h2>
			<form @submit.prevent="">
					<input type="password" placeholder="Account"  v-model:vlue="account" v-on:input="change()" />
					<input type="password" name="Password" placeholder="Password" required="" v-model:vlue="password" />
					<input type="password" name="Password" placeholder="Confirm Password" required="" v-model:vlue="passwordCon" />
					<a href="" v-if="flag">用户已经存在</a>

				<div class="submit-w3l">
					<input type="submit" value="Sign up" v-on:click="singup">
				</div>
			</form>
		</div>
		</div>
<!--//form-ends-here-->

	<!-- //copyright --> 
	<script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
</div>
</body>
<script>
var vm = new Vue({
  el: '#app',
  data: {
	account:'',
	password:'',
	passwordCon:"",
	flag:false,

	

  },
  created(){
	  //载入值

  },
  methods:{
	  clickAdd(){
		  console.log('click add button')
		  	console.log('load');
			
	  },

	change(){
		self = this;
		var settings = {
  "async": true,
  "crossDomain": true,
  "url": "http://localhost:8090/checkUsername?userId="+ self.account,
  "method": "GET",
  "headers": {
    "cache-control": "no-cache",
    "postman-token": "772c5a26-deb4-383f-bf6b-005ea10b45c1"
  }
}

$.ajax(settings).done(function (response) {
  console.log(response);
  if(!response.status)
			{
			self.flag = false;  
			}
			else{
				self.flag = true;
			}
  
});
	},


	  singup(){

		  	if(this.password != this.passwordCon)
			  {
				  alert("两次密码输入不同");
				  this.password ="";
				  this.passwordCon = "";

				  return;
			  }

		  self =this;
		  console.log("singup");
		  data = {"userid":self.account,"email":self.password,"firstname":"777","lastname":"888","status":"OK","addr1":"jjj2","addr2":"lll2","city":"Tokyo","state":"WWF","zip":"zero","country":"Japan","phone":"1530080","password":self.password,"langpref":"chinese6","favcategory":"fish","mylistopt":2,"banneropt":3}




			var settings = {
				"async": true,
				"crossDomain": true,
				"url": "http://localhost:8090/signUp",
				"method": "POST",
				"headers": {
					"content-type": "application/json",
					"cache-control": "no-cache",
					"postman-token": "30974f94-60fb-cef9-66dc-ceac64f44b14"
				},
				"processData": false,
				"data": JSON.stringify(data)
				}

				$.ajax(settings).done(function (response) {
				console.log(response);
				window.location.href="login";   

				});

			

	  }

	  
  }
  
})
</script>
</html>